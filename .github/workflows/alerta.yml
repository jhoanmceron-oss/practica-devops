name: Notificacion Hola Mundo

# Se ejecuta cuando se hace push a la rama main
on:
  push:
    branches:
      - main

jobs:
  hola-mundo:
    name: Ejecutar Hola Mundo y Notificar
    runs-on: ubuntu-latest

    steps:
      # Paso 1: Clonar el repositorio
      - name: Checkout del repositorio
        uses: actions/checkout@v4

      # Paso 2: Configurar Node.js
      - name: Configurar Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      # Paso 3: Ejecutar el programa Hola Mundo
      - name: Ejecutar hola-mundo.js
        run: node hola-mundo.js

      # Paso 4: Enviar notificacion a ntfy.sh
      - name: Enviar notificacion a ntfy.sh
        run: |
          curl -X POST https://ntfy.sh/devops-itla \
            -H "Title: âœ… Push en practica-devops" \
            -H "Priority: high" \
            -H "Tags: white_check_mark,rocket" \
            -d "ðŸš€ Nuevo push en la rama main del repositorio practica-devops por ${{ github.actor }}. Commit: ${{ github.event.head_commit.message }}"
